<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="User">  

   <!-- 회원가입 -->
   <insert id="UserInsert">
   
       INSERT INTO MEMBERLIST (
		      MEMID
			, MEMPW
			, MEMNAME
			, MEMPH
			, EMAIL
		) VALUES (
		    #{ memid     },
		    #{ mempw     },
		    #{ memname   },
		    #{ memph     },
		    #{ email     }	    
		)       
   
   </insert>
 
  <!-- 로그인 -->
  <select id         = "GetLogin"
           resultType = "com.green.user.vo.UserVo">
      
      SELECT    MEMID
              , MEMPW
              , MEMNAME
              , MEMPH
              , EMAIL
              , JOINDATE
       FROM    MEMBERLIST
       WHERE   MEMID  = #{ memid }
        AND    MEMPW  = #{ mempw }
   	      
   </select>
   
   <!-- 목록 조회 : DESC : 최신순   -->
   <select id         = "UserList"
           resultType = "com.green.user.vo.UserVo"  >
   
     SELECT    MEMID
   	         , MEMPW
   	         , MEMNAME
   	         , MEMPH
   	         , EMAIL
   	         , TO_CHAR(JOINDATE, 'YYYY-MM-DD HH24:MI:SS')  JOINDATE
       FROM      MEMBERLIST
       ORDER BY  JOINDATE   DESC         
   
   </select> 
   
   <!-- 내 정보보기 -->
    <select id="GetUser"
            resultType = "com.green.user.vo.UserVo">
   
       SELECT  MEMID
   	         , MEMPW
   	         , MEMNAME
   	         , MEMPH
   	         , EMAIL
   	         , TO_CHAR(JOINDATE, 'YYYY-MM-DD')  JOINDATE
   	    FROM   MEMBERLIST
   	    WHERE  MEMID =  #{ sessionScope.login.memid }
   
   </select>
   
   <!-- 내 정보 수정 -->
   <update  id="UpdateUser">
   
   	  UPDATE   MEMBERLIST
   	    SET    MEMNAME  = #{ memname },
   	    	   MEMPW    = #{ mempw },
   	           MEMPH    = #{ memph },
   	           EMAIL    = #{ email }
   	    WHERE  MEMID    = #{ memid }
         AND   MEMPW    = #{ mempw }
         
   </update>
   
   
   
    
</mapper>





   